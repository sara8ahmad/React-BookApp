(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{24:function(e,t,c){},25:function(e,t,c){},35:function(e,t,c){"use strict";c.r(t);var n=c(1),o=c(17),s=c.n(o),l=(c(24),c(19)),i=c(10),a=(c(25),c(7)),r=c(2),d=c(11),j="https://reactnd-books-api.udacity.com",b=localStorage.token;b||(b=localStorage.token=Math.random().toString(36).substr(-8));var h={Accept:"application/json",Authorization:b},u=c(0),f=function(e){var t=e.book,c=e.selectUsedShelf;return Object(u.jsxs)("div",{className:"book",children:[Object(u.jsxs)("div",{className:"book-top",children:[Object(u.jsx)("div",{className:"book-cover",style:{width:128,height:188,backgroundImage:t.imageLinks?"url(".concat(t.imageLinks.thumbnail,")"):""}}),Object(u.jsx)("div",{className:"book-shelf-changer",children:Object(u.jsxs)("select",{defaultValue:t.shelf?t.shelf:"none",onChange:function(e){e.preventDefault(),c(t,e.target.value)},children:[Object(u.jsx)("option",{value:"moveTo",disabled:!0,children:"Move to..."}),Object(u.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(u.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(u.jsx)("option",{value:"read",children:"Read"}),Object(u.jsx)("option",{value:"none",children:"None"})]})})]}),Object(u.jsx)("div",{className:"book-title",children:t.title}),Object(u.jsx)("div",{className:"book-authors",children:t.authors})]})},O=function(e){var t=e.bookItem,c=e.title,n=e.selectUsedShelf;return Object(u.jsxs)("div",{className:"bookshelf",children:[Object(u.jsx)("h2",{className:"bookshelf-title",children:c}),Object(u.jsx)("div",{className:"bookshelf-books",children:Object(u.jsx)("ol",{className:"books-grid",children:t.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsx)(f,{book:e,selectUsedShelf:n})},e.id)}))})})]})},m=function(e){var t=e.bookItem,c=e.selectUsedShelf,n=[];return n[0]=t.filter((function(e){return"currentlyReading"===e.shelf})),n[1]=t.filter((function(e){return"wantToRead"===e.shelf})),n[2]=t.filter((function(e){return"read"===e.shelf})),Object(u.jsxs)("div",{children:[Object(u.jsx)(O,{title:"Currently Reading",bookItem:n[0],selectUsedShelf:c}),Object(u.jsx)(O,{title:"Want To Read",bookItem:n[1],selectUsedShelf:c}),Object(u.jsx)(O,{title:"Read",bookItem:n[2],selectUsedShelf:c})]})},v=function(e){var t=e.bookItem,c=e.selectUsedShelf;return Object(u.jsxs)("div",{className:"list-books",children:[Object(u.jsx)("div",{className:"list-books-title",children:Object(u.jsx)("h1",{children:" MyReads "})}),Object(u.jsx)("div",{className:"list-books-content",children:Object(u.jsx)(m,{bookItem:t,selectUsedShelf:c})}),Object(u.jsx)("div",{className:"open-search",children:Object(u.jsx)(a.b,{onClick:function(e){console.log("Link clicked")},to:"/query",children:"Add a book"})})]})},x=function(e){var t=e.bookItem,c=e.selectUsedShelf,o=Object(n.useState)(""),s=Object(i.a)(o,2),l=s[0],r=s[1],b=Object(n.useState)([]),O=Object(i.a)(b,2),m=O[0],v=O[1];return Object(n.useEffect)((function(){var e=setTimeout((function(){if(l){var e=function(e,t){return fetch("".concat(j,"/search"),{method:"POST",headers:Object(d.a)(Object(d.a)({},h),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))}(l);e.then((function(e){null!==e&&void 0!==e&&e.error||void 0===e?v([]):(null===e||void 0===e||e.map((function(e){e.shelf="none",t.forEach((function(t){e.id===t.id&&(e.shelf=t.shelf)}))})),v(e))}))}else v([])}),300);return function(){clearTimeout(e)}}),[l,t]),Object(u.jsxs)("div",{className:"search-books",children:[Object(u.jsxs)("div",{className:"search-books-bar",children:[Object(u.jsx)(a.b,{to:"/",children:Object(u.jsx)("button",{className:"close-search",children:"Close"})}),Object(u.jsx)("div",{className:"search-books-input-wrapper",children:Object(u.jsx)("input",{type:"text",placeholder:"Search by title or author",value:l,onChange:function(e){r(e.target.value)}})})]}),Object(u.jsx)("div",{className:"search-books-results",children:Object(u.jsx)("ol",{className:"books-grid",children:null===m||void 0===m?void 0:m.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsx)(f,{book:e,selectUsedShelf:c})},e.id)}))})})]})};var k=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),c=t[0],o=t[1];Object(n.useEffect)((function(){fetch("".concat(j,"/books"),{headers:h}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(e){o(e)}))}));var s=function(e,t){!function(e,t){fetch("".concat(j,"/books/").concat(e.id),{method:"PUT",headers:Object(d.a)(Object(d.a)({},h),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))}(e,t),console.log(e,t);var n=null===c||void 0===c?void 0:c.filter((function(t){return e.id===t.id}));console.log(n),o((function(e){return Object(l.a)(n)})),console.log(o)};return Object(u.jsx)("div",{className:"app",children:Object(u.jsx)(a.a,{children:Object(u.jsxs)(r.c,{children:[Object(u.jsx)(r.a,{path:"/query",children:Object(u.jsx)(x,{bookItem:c,selectUsedShelf:s})}),Object(u.jsx)(r.a,{path:"/",children:Object(u.jsx)(v,{bookItem:c,selectUsedShelf:s})})]})})})};s.a.render(Object(u.jsx)(n.StrictMode,{children:Object(u.jsx)(k,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.510a208b.chunk.js.map